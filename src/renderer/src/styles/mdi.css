/* Windows 3.1 MDI (Multiple Document Interface) Styles */

/* ==========================================
   MDI CONTAINER
   ========================================== */

.win31-mdi-container {
  position: relative;
  flex: 1;
  overflow: hidden;
  background-color: var(--desktop-bg);
  /* Sunken work area effect */
  border-style: solid;
  border-width: var(--border-width-thick);
  border-top-color: var(--bevel-dark);
  border-left-color: var(--bevel-dark);
  border-bottom-color: var(--bevel-light);
  border-right-color: var(--bevel-light);
}

/* ==========================================
   MDI CHILD WINDOW
   ========================================== */

.win31-mdi-window {
  position: absolute;
  display: flex;
  flex-direction: column;
  min-width: 150px;
  min-height: 100px;
  background-color: var(--window-chrome);
  border: var(--mdi-border-width, var(--border-width)) solid var(--window-border);
  box-shadow:
    inset 1px 1px 0 var(--bevel-light),
    inset -1px -1px 0 var(--bevel-dark);
}

.win31-mdi-window .win31-titlebar {
  height: var(--mdi-titlebar-height, var(--titlebar-height));
  font-size: var(--mdi-titlebar-font-size, var(--font-size-title));
}

.win31-mdi-window .win31-control-button {
  width: var(--mdi-control-button-size, var(--control-button-size));
  height: var(--mdi-control-button-size, var(--control-button-size));
  min-width: var(--mdi-control-button-size, var(--control-button-size));
  min-height: var(--mdi-control-button-size, var(--control-button-size));
  font-size: var(--mdi-control-button-font-size, 9px);
}
.win31-mdi-window.active {
  z-index: 100;
}

.win31-mdi-window .win31-titlebar {
  cursor: move;
}

.win31-mdi-window .win31-window-body {
  flex: 1;
  overflow: auto;
  background-color: var(--window-bg);
}

/* Maximized state */
.win31-mdi-window.maximized {
  top: 0 !important;
  left: 0 !important;
  right: 0 !important;
  bottom: 0 !important;
  width: auto !important;
  height: auto !important;
  border: none;
  box-shadow: none;
}

.win31-mdi-window.maximized .win31-titlebar {
  cursor: default;
}

/* ==========================================
   RESIZE HANDLES
   ========================================== */

.win31-mdi-window .resize-handle {
  position: absolute;
  z-index: 10;
}

.resize-handle-n {
  top: 0;
  left: 4px;
  right: 4px;
  height: 4px;
  cursor: n-resize;
}

.resize-handle-s {
  bottom: 0;
  left: 4px;
  right: 4px;
  height: 4px;
  cursor: s-resize;
}

.resize-handle-w {
  top: 4px;
  left: 0;
  bottom: 4px;
  width: 4px;
  cursor: w-resize;
}

.resize-handle-e {
  top: 4px;
  right: 0;
  bottom: 4px;
  width: 4px;
  cursor: e-resize;
}

.resize-handle-nw {
  top: 0;
  left: 0;
  width: 8px;
  height: 8px;
  cursor: nw-resize;
}

.resize-handle-ne {
  top: 0;
  right: 0;
  width: 8px;
  height: 8px;
  cursor: ne-resize;
}

.resize-handle-sw {
  bottom: 0;
  left: 0;
  width: 8px;
  height: 8px;
  cursor: sw-resize;
}

.resize-handle-se {
  bottom: 0;
  right: 0;
  width: 8px;
  height: 8px;
  cursor: se-resize;
}

/* ==========================================
   MINIMIZED GROUP ICONS
   ========================================== */

.win31-mdi-icon-bar {
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  display: flex;
  flex-wrap: wrap;
  gap: 4px;
  padding: 4px;
  background-color: transparent;
}

.win31-mdi-icon {
  display: flex;
  flex-direction: column;
  align-items: center;
  width: var(--mdi-icon-width);
  padding: 4px;
  cursor: default;
}

.win31-mdi-icon:hover {
  background-color: rgba(255, 255, 255, 0.1);
}

.win31-mdi-icon.selected {
  background-color: var(--selection-bg);
}

.win31-mdi-icon .icon {
  width: var(--icon-size);
  height: var(--icon-size);
  image-rendering: pixelated;
}

.win31-mdi-icon .label {
  margin-top: 2px;
  font-family: var(--font-system);
  font-size: var(--font-size-base);
  color: var(--desktop-text);
  text-align: center;
  max-width: 100%;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.win31-mdi-icon.selected .label {
  background-color: var(--selection-bg);
  color: var(--selection-text);
}

/* ==========================================
   PROGRAM ITEM GRID
   ========================================== */

.win31-item-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(var(--icon-tile-width), 1fr));
  align-content: flex-start;
  gap: 8px;
  padding: 8px;
  min-height: 100%;
}

.win31-program-item {
  display: flex;
  flex-direction: column;
  align-items: center;
  width: 100%;
  padding: 4px;
  cursor: default;
}

.win31-program-item:hover:not(.selected) {
  background-color: rgba(0, 0, 128, 0.1);
}

.win31-program-item.selected {
  background-color: var(--selection-bg);
}

.win31-program-item .icon {
  width: var(--icon-size);
  height: var(--icon-size);
  image-rendering: pixelated;
  margin-bottom: 4px;
}

.win31-program-item .label {
  font-family: var(--font-system);
  font-size: var(--font-size-base);
  color: var(--text-primary);
  text-align: center;
  max-width: 100%;
  line-height: 1.2;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.win31-program-item.selected .label {
  color: var(--selection-text);
}

/* ==========================================
   DROP ZONE INDICATOR
   ========================================== */

.win31-item-grid.drag-over {
  background-color: rgba(0, 0, 128, 0.1);
  outline: 2px dashed var(--win31-blue);
  outline-offset: -4px;
}
